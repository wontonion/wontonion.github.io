<!doctype html>
<html lang="zh-Hans" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-auth-and-security/jwt" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.6.3">
<title data-rh="true">The story of JWT | wontonion&#x27;s blog</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://wontonion.github.io/zh-Hans/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://wontonion.github.io/zh-Hans/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://wontonion.github.io/zh-Hans/docs/auth-and-security/jwt"><meta data-rh="true" property="og:locale" content="zh_Hans"><meta data-rh="true" property="og:locale:alternate" content="en"><meta data-rh="true" name="docusaurus_locale" content="zh-Hans"><meta data-rh="true" name="docsearch:language" content="zh-Hans"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="The story of JWT | wontonion&#x27;s blog"><meta data-rh="true" name="description" content="Start with session"><meta data-rh="true" property="og:description" content="Start with session"><link data-rh="true" rel="icon" href="/zh-Hans/img/clean_avatar.png"><link data-rh="true" rel="canonical" href="https://wontonion.github.io/zh-Hans/docs/auth-and-security/jwt"><link data-rh="true" rel="alternate" href="https://wontonion.github.io/docs/auth-and-security/jwt" hreflang="en"><link data-rh="true" rel="alternate" href="https://wontonion.github.io/zh-Hans/docs/auth-and-security/jwt" hreflang="zh-Hans"><link data-rh="true" rel="alternate" href="https://wontonion.github.io/docs/auth-and-security/jwt" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/zh-Hans/blog/rss.xml" title="wontonion&#39;s blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/zh-Hans/blog/atom.xml" title="wontonion&#39;s blog Atom Feed"><link rel="stylesheet" href="/zh-Hans/assets/css/styles.8f542d31.css">
<script src="/zh-Hans/assets/js/runtime~main.f53e7c90.js" defer="defer"></script>
<script src="/zh-Hans/assets/js/main.62c80058.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"dark")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="跳到主要内容"><a class="skipToContent_Ni4h" href="#__docusaurus_skipToContent_fallback">跳到主要内容</a></div><nav aria-label="主导航" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="切换导航栏" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/zh-Hans/"><div class="navbar__logo"><img src="/zh-Hans/img/github_avatar.jpeg" alt="wontonion&#x27;s github avatar" class="themedComponent_doJ8 themedComponent--light_Xqlf" style="width:30px;height:30px;border-radius:50%"><img src="/zh-Hans/img/github_avatar.jpeg" alt="wontonion&#x27;s github avatar" class="themedComponent_doJ8 themedComponent--dark_NgaB" style="width:30px;height:30px;border-radius:50%"></div><b class="navbar__title text--truncate">wontonion</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/zh-Hans/about">About</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/zh-Hans/docs">Docs</a><a class="navbar__item navbar__link" href="/zh-Hans/project">Project</a><a href="https://github.com/wontonion" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink__Lj7"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="navbarSearchContainer_aLwx"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_kLdA"><div class="docsWrapper_Q31X"><button aria-label="回到顶部" class="clean-btn theme-back-to-top-button backToTopButton_RVU9" type="button"></button><div class="docRoot_Pesf"><aside class="theme-doc-sidebar-container docSidebarContainer_vyA8"><div class="sidebarViewport_vvqq"><div class="sidebar_WdY4"><nav aria-label="文档侧边栏" class="menu thin-scrollbar menu_nK2n"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-Hans/docs/category/frontend-study">Frontend Study</a><button aria-label="展开侧边栏分类 &#x27;Frontend Study&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-Hans/docs/intro">Tutorial Intro</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-Hans/docs/category/multithreading-in-java">Multithreading in Java</a><button aria-label="展开侧边栏分类 &#x27;Multithreading in Java&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-Hans/docs/category/tutorial---basics">Tutorial - Basics</a><button aria-label="展开侧边栏分类 &#x27;Tutorial - Basics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/zh-Hans/docs/category/tutorial---extras">Tutorial - Extras</a><button aria-label="展开侧边栏分类 &#x27;Tutorial - Extras&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/zh-Hans/docs/auth-and-security/Oauth2">auth-and-security</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/auth-and-security/Oauth2">Story of OAuth2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/auth-and-security/jwt-with-passportjs">jwt-with-passportjs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/zh-Hans/docs/auth-and-security/jwt">The story of JWT</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/zh-Hans/docs/auth-and-security/register-and-login-desing">registration and login</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-Hans/docs/greeting">Hello from Docusaurus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/zh-Hans/docs/">index</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/zh-Hans/docs/japanese-study/red-gem-book/文字问题">japanese-study</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_CkrH"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_CF45"><div class="docItemContainer_yyys"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_ffMw" aria-label="页面路径"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="主页面" class="breadcrumbs__link" href="/zh-Hans/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_gMLt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">auth-and-security</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">The story of JWT</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_EOnL theme-doc-toc-mobile tocMobile_DsBD"><button type="button" class="clean-btn tocCollapsibleButton_nX2t">本页总览</button></div><div class="theme-doc-markdown markdown"><header><h1>The story of JWT</h1></header>
<h2 class="anchor anchorWithStickyNavbar_rNrb" id="start-with-session">Start with session<a href="#start-with-session" class="hash-link" aria-label="Start with session的直接链接" title="Start with session的直接链接">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_rNrb" id="session">session<a href="#session" class="hash-link" aria-label="session的直接链接" title="session的直接链接">​</a></h3>
<p>Before look into JWT, let&#x27;s see how did it come out. Image a authentication scenario.</p>
<ol>
<li>User login with username and password, which means client sending with username and password to server.</li>
<li>Server verify the username and password, if it&#x27;s correct, server will store the user information in session. Here, the session is a piece of data stored user information especially the login state in server side.</li>
<li>Then server will return a session id to client, which is stored in cookie. Cookie is stored in client side, beyond session id, it also stored other information like expiration time, domain, etc.</li>
<li>Every time client send request to server, it will bring the cookie with session id. Server will verify the session id in cookie, if it&#x27;s correct, server will return the data to client.</li>
</ol>
<p>Take a real world scenario to explain the above steps. Say, you want to do shopping on a website</p>
<ol>
<li>You log in your account with username and password. If your username and password are correct, the server will store your user information in session.</li>
<li>The server will return a session id to your browser, which is stored in cookie.</li>
<li>You add some items to your shopping cart. It may be stored in cookie, and may be stored in server side. If it&#x27;s stored in server side, the server will authenticate your identity with the session id in cookie. That means you will send cart information with session id to server.</li>
</ol>
<p>So, this is how session works. But there are some problems with session.</p>
<h3 class="anchor anchorWithStickyNavbar_rNrb" id="problem-with-session">Problem with session<a href="#problem-with-session" class="hash-link" aria-label="Problem with session的直接链接" title="Problem with session的直接链接">​</a></h3>
<p>From the example above we can see there is the user state is stored in server side. It means the server need to store the user state for every user. If there are millions of users, the server need to store millions of user state. It&#x27;s a huge burden for server.</p>
<p>And if there is only one server, what if the server is down? The user state will be lost. Maybe you choose to scale the server, but it&#x27;s not a good solution. Because the user state is stored in server side, if you scale the server, you need to synchronize the user state between servers. It brings in more complexity.</p>
<p>One solution is to write the user state in database. But it&#x27;s still not a good solution. Because every time the client send request to server, the server need to read the user state from database. Then it will be a performance issue.</p>
<p>Another solution is to store the user state in client side. Here comes the JWT.</p>
<h2 class="anchor anchorWithStickyNavbar_rNrb" id="json-web-token">Json Web Token<a href="#json-web-token" class="hash-link" aria-label="Json Web Token的直接链接" title="Json Web Token的直接链接">​</a></h2>
<p>Json Web Token(JWT) uses JSON objects to achieve authentication. This token works like a ticket with time limit. In this case, after client is authenticated, the server will give a token to client. The client will store the token in cookie or local storage. Every time the client send request to server, it will bring the token. The server will verify the token, if it&#x27;s correct, the server will return the data to client.</p>
<h2 class="anchor anchorWithStickyNavbar_rNrb" id="whats-inside-the-token">what&#x27;s inside the token<a href="#whats-inside-the-token" class="hash-link" aria-label="what&#x27;s inside the token的直接链接" title="what&#x27;s inside the token的直接链接">​</a></h2>
<p>The token is a encrypted string. It can be divided into three parts: header, payload and signature. Each part is divided by dot(.). It looks like,</p>
<div class="codeBlockContainer_F6Dw theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_j6wp"><pre tabindex="0" class="prism-code language-text codeBlock_UnF8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_uyJi"><span class="token-line" style="color:#F8F8F2"><span class="token plain">xxxxx.yyyyy.zzzzz</span><br></span></code></pre><div class="buttonGroup_uUng"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_jxNM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_RKnb"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_qsdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The header and payload are JSON objects, and the signature is the encrypted string of above two piece of information.</p>
<ul>
<li>header: a json object, which contains the algorithm and token type.</li>
<li>payload: a json object, which contains the user information, expiration time, etc.(you can also add custom information)</li>
<li>signature: the encrypted string of above two parts.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_rNrb" id="header">header<a href="#header" class="hash-link" aria-label="header的直接链接" title="header的直接链接">​</a></h3>
<p>The header is a json object, which contains the algorithm and token type.</p>
<div class="language-json codeBlockContainer_F6Dw theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_j6wp"><pre tabindex="0" class="prism-code language-json codeBlock_UnF8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_uyJi"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;alg&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;HS256&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;typ&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;JWT&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_uUng"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_jxNM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_RKnb"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_qsdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Usually, the header is encoded by Base64Url in the final encrypted string.</p>
<h3 class="anchor anchorWithStickyNavbar_rNrb" id="payload">payload<a href="#payload" class="hash-link" aria-label="payload的直接链接" title="payload的直接链接">​</a></h3>
<p>The payload is a json object, which contains the user information, expiration time, etc. You can also add custom information.</p>
<div class="language-json codeBlockContainer_F6Dw theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_j6wp"><pre tabindex="0" class="prism-code language-json codeBlock_UnF8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_uyJi"><span class="token-line" style="color:#F8F8F2"><span class="token punctuation" style="color:rgb(248, 248, 242)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;sub&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;1234567890&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;name&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(255, 121, 198)">&quot;John Doe&quot;</span><span class="token punctuation" style="color:rgb(248, 248, 242)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  </span><span class="token property">&quot;iat&quot;</span><span class="token operator">:</span><span class="token plain"> </span><span class="token number">1516239022</span><span class="token plain"></span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain"></span><span class="token punctuation" style="color:rgb(248, 248, 242)">}</span><br></span></code></pre><div class="buttonGroup_uUng"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_jxNM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_RKnb"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_qsdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>The payload is also encoded by Base64Url in the final encrypted string.</p>
<h3 class="anchor anchorWithStickyNavbar_rNrb" id="signature">signature<a href="#signature" class="hash-link" aria-label="signature的直接链接" title="signature的直接链接">​</a></h3>
<p>The signature warp the header and payload. And then encrypt the warp string with secret key. The algorithm is HMACSHA256. The final encrypted string is the signature. The signature is used guarantee the token is not tampered with.</p>
<div class="codeBlockContainer_F6Dw theme-code-block" style="--prism-color:#F8F8F2;--prism-background-color:#282A36"><div class="codeBlockContent_j6wp"><pre tabindex="0" class="prism-code language-text codeBlock_UnF8 thin-scrollbar" style="color:#F8F8F2;background-color:#282A36"><code class="codeBlockLines_uyJi"><span class="token-line" style="color:#F8F8F2"><span class="token plain">HMACSHA256(</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  base64UrlEncode(header) + &quot;.&quot; +</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  base64UrlEncode(payload),</span><br></span><span class="token-line" style="color:#F8F8F2"><span class="token plain">  secret)</span><br></span></code></pre><div class="buttonGroup_uUng"><button type="button" aria-label="复制代码到剪贴板" title="复制" class="clean-btn"><span class="copyButtonIcons_jxNM" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_RKnb"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_qsdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_rNrb" id="deficits-of-jwt">Deficits of JWT<a href="#deficits-of-jwt" class="hash-link" aria-label="Deficits of JWT的直接链接" title="Deficits of JWT的直接链接">​</a></h2>
<ul>
<li>Since JWT doesn&#x27;t store the user state in server side, server cannot dispose or modify the token until it&#x27;s expired. It means if the token is stolen, the thief can use the token to access the server until it&#x27;s expired.</li>
<li>In order to prevent the stolen of JWT token, the expiration time should be set as short as possible.</li>
<li>Also, transfer the token with HTTPS is a good practice since https is more secure than http.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_rNrb" id="used-in-passportjs">used in passport.js<a href="#used-in-passportjs" class="hash-link" aria-label="used in passport.js的直接链接" title="used in passport.js的直接链接">​</a></h2>
<p>reference:</p>
<ul>
<li>(Introduction to JSON Web Tokens)[<a href="https://jwt.io/introduction/" target="_blank" rel="noopener noreferrer">https://jwt.io/introduction/</a>]</li>
<li>(Sessionless Authentication using JWTs (with Node + Express + Passport JS))[<a href="https://medium.com/@bryanmanuele/sessionless-authentication-withe-jwts-with-node-express-passport-js-69b059e4b22c" target="_blank" rel="noopener noreferrer">https://medium.com/@bryanmanuele/sessionless-authentication-withe-jwts-with-node-express-passport-js-69b059e4b22c</a>]</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/auth-and-security/jwt.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_AC0f" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>编辑此页</a></div><div class="col lastUpdated_w2LY"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="文件选项卡"><a class="pagination-nav__link pagination-nav__link--prev" href="/zh-Hans/docs/auth-and-security/jwt-with-passportjs"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">jwt-with-passportjs</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/zh-Hans/docs/auth-and-security/register-and-login-desing"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">registration and login</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_y0gg thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#start-with-session" class="table-of-contents__link toc-highlight">Start with session</a><ul><li><a href="#session" class="table-of-contents__link toc-highlight">session</a></li><li><a href="#problem-with-session" class="table-of-contents__link toc-highlight">Problem with session</a></li></ul></li><li><a href="#json-web-token" class="table-of-contents__link toc-highlight">Json Web Token</a></li><li><a href="#whats-inside-the-token" class="table-of-contents__link toc-highlight">what&#39;s inside the token</a><ul><li><a href="#header" class="table-of-contents__link toc-highlight">header</a></li><li><a href="#payload" class="table-of-contents__link toc-highlight">payload</a></li><li><a href="#signature" class="table-of-contents__link toc-highlight">signature</a></li></ul></li><li><a href="#deficits-of-jwt" class="table-of-contents__link toc-highlight">Deficits of JWT</a></li><li><a href="#used-in-passportjs" class="table-of-contents__link toc-highlight">used in passport.js</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">MIT Licensed | Copyright © 2025 wontonion. Built with Docusaurus.</div></div></div></footer></div>
</body>
</html>